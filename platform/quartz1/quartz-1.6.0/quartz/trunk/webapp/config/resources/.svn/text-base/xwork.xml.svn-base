<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.0//EN" "http://www.opensymphony.com/xwork/xwork-1.0.dtd">
<xwork>
	<include file="webwork-default.xml"/>
	
	<package name="default" extends="webwork-default">
		<interceptors>
			<interceptor name="schedulerCheck" class="org.quartz.ui.web.action.interceptors.SchedulerCheckInterceptor" >
				<param name="failResult">scheduler</param>
			</interceptor>
			
			<interceptor name="cancel" class="org.quartz.ui.web.action.interceptors.SkipInterceptor">
				<param name="skipKey">cancel</param>
				<param name="skipResultName">cancel</param>
			</interceptor>
			
			<interceptor-stack name="defaultComponentStack">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="validation"/>
			</interceptor-stack>
	
			<interceptor-stack name="schedulingDefault">
				<interceptor-ref name="schedulerCheck"/>
				<interceptor-ref name="defaultStack"/>
			</interceptor-stack>

			<interceptor-stack name="schedulingCRUD">
				<interceptor-ref name="schedulerCheck"/>
				<interceptor-ref name="validationWorkflowStack"/>
			</interceptor-stack>

		</interceptors>
		<default-interceptor-ref name="defaultStack"/>
		
		<global-results>
			 	<result name="scheduler" type="redirect">/schedule/down.vm</result>		
		</global-results>
			
		<action name="logout" class="org.quartz.ui.web.base.BaseWebWork" method="logout" >
			<result name="success" type="velocity">/index.vm</result>
		</action>
		
		<action name="logon" class="org.quartz.ui.web.base.BaseWebWork">
			<result name="success" type="velocity">/logon.vm</result>
		</action>
		
		<action name="quartzLog" class="org.quartz.ui.web.base.BaseWebWork">
			<result name="success" type="dispatcher">/WEB-INF/logs/ShortResults.html</result>
		</action>
	

	</package>

	<package name="jobs" extends="default" namespace="/jobs">
		<default-interceptor-ref name="schedulingDefault"/>
		
		<action name="createJob" class="org.quartz.ui.web.action.job.CreateJob" method="start">
			<result name="input" type="velocity">/jobs/createJob.vm</result>
			<result name="success" type="velocity">/jobs/createJob.vm</result>
			<result name="error" type="velocity">/jobs/createJob.vm</result>
		</action>

		<action name="createDefinedJob" class="org.quartz.ui.web.action.job.CreateDefJob" method="start">
			<result name="input" type="velocity">/jobs/definition/createDefinedJob.vm</result>
			<result name="success" type="velocity">/jobs/definition/createDefinedJob.vm</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
		</action>
	
		<action name="saveDefinedJob" class="org.quartz.ui.web.action.job.CreateDefJob" >
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/jobs/definition/createDefinedJob.vm</result>
			<result name="success" type="chain">viewJob</result>
			<result name="error" type="velocity">/jobs/definition/createDefinedJob.vm</result>
		</action>
		
		<action name="viewJob" class="org.quartz.ui.web.action.job.SimpleJobActions" method="view" >
			<result name="success" type="velocity">/jobs/viewJob.vm</result>
			<result name="error" type="velocity">/jobs/definition/createDefinedJob.vm</result>
		</action>
		
		<action name="deleteJob" class="org.quartz.ui.web.action.job.SimpleJobActions" method="delete" >
			<interceptor-ref name="schedulingCRUD"/>
			<result name="success" type="chain">
				<param name="actionName">listJobs</param>
				<param name="namespace">/schedule</param>
			</result>			
			<result name="error" type="chain">
				<param name="actionName">listJobs</param>
				<param name="namespace">/schedule</param>
			</result>			
		</action>
		
		<action name="executeJob" class="org.quartz.ui.web.action.job.SimpleJobActions" method="runNow" >
			<interceptor-ref name="schedulingCRUD"/>
			<result name="success" type="chain">viewJob</result>
			<result name="error" type="velocity">/jobs/viewJob.vm</result>
		</action>
	
		<action name="editJob" class="org.quartz.ui.web.action.job.CreateJob" method="edit">
			<result name="input" type="velocity">/jobs/createJob.vm</result>
			<result name="success" type="velocity">/jobs/createJob.vm</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
		</action>

		<action name="saveJob" class="org.quartz.ui.web.action.job.CreateJob">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/jobs/createJob.vm</result>
			<result name="success" type="chain">viewJob</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
		</action>
	
	
	</package>

	<package name="schedule" extends="default" namespace="/schedule">
		<default-interceptor-ref name="schedulingDefault"/>
	
		<action name="listJobs" class="org.quartz.ui.web.action.schedule.ListJobs">
			<result name="success" type="dispatcher">/jobs/listAllJobs.jsp</result>
		</action>

		<action name="scheduleControl" class="org.quartz.ui.web.action.schedule.ScheduleControler" >
			<interceptor-ref name="validationWorkflowStack"/>
			<result name="input" type="velocity">/schedule/chooseScheduler.vm</result>
			<result name="success" type="velocity">/schedule/chooseScheduler.vm</result>
			<result name="error" type="velocity">/schedule/chooseScheduler.vm</result>
		</action>
					
		<action name="unschedule" class="org.quartz.ui.web.action.schedule.UnSchedule">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="success" type="chain">
				<param name="actionName">listJobs</param>
				<param name="namespace">/schedule</param>
			</result>			
		</action>

		<action name="startSchedule" class="org.quartz.ui.web.action.schedule.SimpleTriggerAction" method="start">
			<result name="input" type="velocity">/schedule/createSimpleTrigger.vm</result>
			<result name="success" type="velocity">/schedule/createSimpleTrigger.vm</result>
		</action>

		<action name="simpleSchedule" class="org.quartz.ui.web.action.schedule.SimpleTriggerAction">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/schedule/createSimpleTrigger.vm</result>
			<result name="success" type="chain">
				<param name="actionName">viewJob</param>
				<param name="namespace">/jobs</param>
			</result>			
			<result name="error" type="velocity">/schedule/createSimpleTrigger.vm</result>
		</action>
  
  		<action name="startCronSchedule" class="org.quartz.ui.web.action.schedule.CronTriggerAction" method="start">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/schedule/createCronTrigger.vm</result>
			<result name="success" type="velocity">/schedule/createCronTrigger.vm</result>
		</action>
  
		<action name="cronSchedule" class="org.quartz.ui.web.action.schedule.CronTriggerAction">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/schedule/createCronTrigger.vm</result>
			<result name="success" type="chain">
				<param name="actionName">viewJob</param>
				<param name="namespace">/jobs</param>
			</result>			
			<result name="error" type="velocity">/schedule/createCronTrigger.vm</result>
		</action>
	  	
	  		
	  	<action name="startUICronSchedule" class="org.quartz.ui.web.action.schedule.UICronTriggerAction" method="start">
			<result name="success" type="velocity">/schedule/createUICronTrigger.vm</result>
			<result name="input" type="velocity">/schedule/createUICronTrigger.vm</result>
		</action>
	  	
	  	
	  	<action name="uiCronSchedule" class="org.quartz.ui.web.action.schedule.UICronTriggerAction">
			<interceptor-ref name="schedulingCRUD"/>
			<result name="input" type="velocity">/schedule/createUICronTrigger.vm</result>
			<result name="success" type="chain">
				<param name="actionName">viewJob</param>
				<param name="namespace">/jobs</param>
			</result>			
			<result name="error" type="velocity">//schedule/createUICronTrigger.vm</result>
		</action>
  
		<action name="listTriggers" class="org.quartz.ui.web.action.schedule.ListTriggers">
			<result name="success" type="dispatcher">/schedule/listAllTriggers.jsp</result>
			<result name="error" type="dispatcher">/schedule/listAllTriggers.jsp</result>
	
		</action>

	</package>
 

	<package name="definition" extends="default" namespace="/definition">

		<action name="add" class="org.quartz.ui.web.action.definitions.DefinitionCrud">
			<interceptor-ref name="cancel"/>
			<interceptor-ref name="validationWorkflowStack"/>
			
			<result name="input" type="velocity">/jobs/definition/edit.vm</result>
			<result name="success" type="chain">list</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
			<result name="cancel" type="redirect">list.action</result>
		</action>

		<action name="view" class="org.quartz.ui.web.action.definitions.Load">
			<result name="input" type="velocity">/jobs/definition/edit.vm</result>
			<result name="success" type="velocity">/jobs/definition/edit.vm</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
		</action>

		<action name="addParameter" class="org.quartz.ui.web.action.definitions.Parameter">
			<interceptor-ref name="validationWorkflowStack"/>
			<result name="input" type="velocity">/jobs/definition/edit.vm</result>
			<result name="success" type="velocity">/jobs/definition/edit.vm</result>
			<result name="error" type="velocity">/jobs/definition/edit.vm</result>
		</action>

		<action name="list" class="org.quartz.ui.web.action.definitions.Load" method="list">
			<interceptor-ref name="defaultStack"/>
			<interceptor-ref name="chain"/>
			<result name="success" type="velocity">/jobs/definition/definitions.vm</result>
		</action>

		<action name="delete" class="org.quartz.ui.web.action.definitions.Delete">
			<interceptor-ref name="validationWorkflowStack"/>
			<result name="success" type="redirect">list.action</result>
		</action>

		<action name="raw" class="org.quartz.ui.web.action.definitions.Raw">
			<result name="success" type="velocity">/jobs/definition/raw.vm</result>
		</action>

		<action name="removeParameter" method="removeParameter" class="org.quartz.ui.web.action.definitions.Parameter">
			<interceptor-ref name="validationWorkflowStack"/>
			<result name="input" type="velocity">/jobs/definition/edit.vm</result>
			<result name="success" type="velocity">/jobs/definition/edit.vm</result>
		</action>

	</package>

</xwork>
